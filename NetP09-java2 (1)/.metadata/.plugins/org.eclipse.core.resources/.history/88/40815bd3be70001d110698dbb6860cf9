import java.awt.Checkbox;
import java.awt.EventQueue;
import java.awt.Frame;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import java.awt.GridLayout;

public class UserList extends JDialog{
	public JButton applyButton;
	public String selectedUserList = "";
	public JCheckBox userCheckBox;

	public StringBuilder sb = new StringBuilder();
	private JLabel label_1;
	public String [] users = null;
	
	public UserList(Frame frame, String title) {
		
		super(frame,title,true);
		this.setBounds(0,0,400,400);;
		getContentPane().setLayout(new GridLayout(0, 1, 0, 0));
		
		JLabel label = new JLabel("채팅 상대를 선택하세요.");
		label.setBounds(10,15,200,30);
		getContentPane().add(label);
		
		label_1 = new JLabel("");
		getContentPane().add(label_1);
		
		for(int i=0; i<users.length; i++) {
			userCheckBox = new JCheckBox(users[i]);
			userCheckBox.setBounds(0, 50+40*i, 70, 30);
			getContentPane().add(userCheckBox);


		}	
		applyButton = new JButton("apply");
		applyButton.setBounds(380,210,50,40);
		getContentPane().add(applyButton);
		
        setLocationRelativeTo(null);
		
		applyButton.addActionListener(new ActionListener() {	
			@Override
			public void actionPerformed(ActionEvent e) {
				if(applyButton.equals(e.getSource())) {		
					if(userCheckBox1.isSelected() == true)
						sb.append("user1");
					if(userCheckBox2.isSelected() == true)
						sb.append(" user2");
					if(userCheckBox3.isSelected() == true)
						sb.append(" user3");
					if(userCheckBox4.isSelected() == true)
						sb.append(" user4");
					if(userCheckBox5.isSelected() == true)
						sb.append(" user5");
					selectedUserList = sb.toString();
					setVisible(false);		
				}				
			}
		});
		
	}
	
	

	public String showDialog() {
		setVisible(true);

		if(selectedUserList == null) return null;
		else return selectedUserList;		
	}
	
	public void setUsers(String []users) {
		this.users = users;
	}
	
}
